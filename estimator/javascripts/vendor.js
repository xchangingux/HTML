/*! rangeslider.js - v0.2.7 | (c) 2014 @andreruffert | MIT license | https://github.com/andreruffert/rangeslider.js */
"use strict";!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(){var t=document.createElement("input");return t.setAttribute("type","range"),"text"!==t.type}function n(){var t=!1,e=e||{};return("ontouchstart"in window||window.DocumentTouch&&document instanceof e)&&(t=!0),t}function r(t,e){var n=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)}function i(t,e){return e=e||100,function(){if(!t.debouncing){var n=Array.prototype.slice.apply(arguments);t.lastReturnVal=t.apply(window,n),t.debouncing=!0}return clearTimeout(t.debounceTimeout),t.debounceTimeout=setTimeout(function(){t.debouncing=!1},e),t.lastReturnVal}}function o(e,n){if(this.$window=t(window),this.$document=t(document),this.$element=t(e),this.options=t.extend({},l,n),this._defaults=l,this._name=s,this.polyfill=this.options.polyfill,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.polyfill&&c)return!1;this.identifier="js-"+s+"-"+ +new Date,this.value=parseFloat(this.$element[0].value)||0,this.min=parseFloat(this.$element[0].getAttribute("min"))||0,this.max=parseFloat(this.$element[0].getAttribute("max"))||100,this.step=parseFloat(this.$element[0].getAttribute("step"))||1,this.$fill=t('<div class="'+this.options.fillClass+'" />'),this.$handle=t('<div class="'+this.options.handleClass+'" />'),this.$range=t('<div class="'+this.options.rangeClass+'" id="'+this.identifier+'" />').insertBefore(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",visibility:"hidden"}),this.handleDown=t.proxy(this.handleDown,this),this.handleMove=t.proxy(this.handleMove,this),this.handleEnd=t.proxy(this.handleEnd,this),this.init();var o=this;this.$window.on("resize."+s,i(function(){r(function(){o.update()},300)},20)),this.$document.on(this.options.startEvent,"#"+this.identifier,this.handleDown),this.$element.on("change."+s,function(t,e){if(!e||e.origin!==s){var n=t.target.value,r=o.getPositionFromValue(n);o.setPosition(r)}})}var s="rangeslider",a=[],u=n(),c=e(),l={polyfill:!0,rangeClass:"rangeslider",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:(u?"touchstart":"mousedown")+"."+s,moveEvent:(u?"touchmove":"mousemove")+"."+s,endEvent:(u?"touchend":"mouseup")+"."+s};o.prototype.init=function(){this.update(),this.onInit&&"function"==typeof this.onInit&&this.onInit()},o.prototype.update=function(){this.handleWidth=this.$handle[0].offsetWidth,this.rangeWidth=this.$range[0].offsetWidth,this.maxHandleX=this.rangeWidth-this.handleWidth,this.grabX=this.handleWidth/2,this.position=this.getPositionFromValue(this.value),this.setPosition(this.position)},o.prototype.handleDown=function(t){if(t.preventDefault(),this.$document.on(this.options.moveEvent,this.handleMove),this.$document.on(this.options.endEvent,this.handleEnd),!((" "+t.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass)>-1)){var e=this.getRelativePosition(this.$range[0],t),n=this.getPositionFromNode(this.$handle[0])-this.getPositionFromNode(this.$range[0]);this.setPosition(e-this.grabX),e>=n&&e<n+this.handleWidth&&(this.grabX=e-n)}},o.prototype.handleMove=function(t){t.preventDefault();var e=this.getRelativePosition(this.$range[0],t);this.setPosition(e-this.grabX)},o.prototype.handleEnd=function(t){t.preventDefault(),this.$document.off(this.options.moveEvent,this.handleMove),this.$document.off(this.options.endEvent,this.handleEnd);var e=this.getRelativePosition(this.$range[0],t);this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(e-this.grabX,this.value)},o.prototype.cap=function(t,e,n){return e>t?e:t>n?n:t},o.prototype.setPosition=function(t){var e=this.cap(t,0,this.maxHandleX),n=this.getValueFromPosition(e);1!==this.step&&(e=this.getPositionFromValue(n),n=this.getValueFromPosition(e)/this.step*this.step),this.$fill[0].style.width=e+this.grabX+"px",this.$handle[0].style.left=e+"px",this.setValue(n),this.position=e,this.value=n,this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(e,n)},o.prototype.getPositionFromNode=function(t){for(var e=0;null!==t;)e+=t.offsetLeft,t=t.offsetParent;return e},o.prototype.getRelativePosition=function(t,e){return(e.pageX||e.originalEvent.clientX||e.originalEvent.touches[0].clientX||e.currentPoint.x)-this.getPositionFromNode(t)},o.prototype.getPositionFromValue=function(t){var e,n;return e=(t-this.min)/(this.max-this.min),n=e*this.maxHandleX},o.prototype.getValueFromPosition=function(t){var e,n;return e=t/this.maxHandleX,n=this.step*Math.round((e*(this.max-this.min)+this.min)/this.step),Number(n.toFixed(2))},o.prototype.setValue=function(t){this.$element.val(t).trigger("change",{origin:s})},o.prototype.destroy=function(){this.$document.off(this.options.startEvent,"#"+this.identifier,this.handleDown),this.$element.off("."+s).removeAttr("style").removeData("plugin_"+s),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0]),a.splice(a.indexOf(this.$element[0]),1),a.length||this.$window.off("."+s)},t.fn[s]=function(e){return this.each(function(){var n=t(this),r=n.data("plugin_"+s);r||(n.data("plugin_"+s,r=new o(this,e)),a.push(this)),"string"==typeof e&&r[e]()})}}),/*!
 * accounting.js v0.3.2
 * Copyright 2011, Joss Crowcroft
 *
 * Freely distributable under the MIT license.
 * Portions of accounting.js are inspired or borrowed from underscore.js
 *
 * Full details and documentation:
 * http://josscrowcroft.github.com/accounting.js/
 */
function(t,e){function n(t){return!!(""===t||t&&t.charCodeAt&&t.substr)}function r(t){return h?h(t):"[object Array]"===f.call(t)}function i(t){return"[object Object]"===f.call(t)}function o(t,e){var n;t=t||{},e=e||{};for(n in e)e.hasOwnProperty(n)&&null==t[n]&&(t[n]=e[n]);return t}function s(t,e,n){var r,i,o=[];if(!t)return o;if(l&&t.map===l)return t.map(e,n);for(r=0,i=t.length;i>r;r++)o[r]=e.call(n,t[r],r,t);return o}function a(t,e){return t=Math.round(Math.abs(t)),isNaN(t)?e:t}function u(t){var e=c.settings.currency.format;return"function"==typeof t&&(t=t()),n(t)&&t.match("%v")?{pos:t,neg:t.replace("-","").replace("%v","-%v"),zero:t}:t&&t.pos&&t.pos.match("%v")?t:n(e)?c.settings.currency.format={pos:e,neg:e.replace("%v","-%v"),zero:e}:e}var c={};c.version="0.3.2",c.settings={currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}};var l=Array.prototype.map,h=Array.isArray,f=Object.prototype.toString,p=c.unformat=c.parse=function(t,e){if(r(t))return s(t,function(t){return p(t,e)});if(t=t||0,"number"==typeof t)return t;e=e||".";var n=new RegExp("[^0-9-"+e+"]",["g"]),i=parseFloat((""+t).replace(/\((.*)\)/,"-$1").replace(n,"").replace(e,"."));return isNaN(i)?0:i},d=c.toFixed=function(t,e){e=a(e,c.settings.number.precision);var n=Math.pow(10,e);return(Math.round(c.unformat(t)*n)/n).toFixed(e)},g=c.formatNumber=function(t,e,n,u){if(r(t))return s(t,function(t){return g(t,e,n,u)});t=p(t);var l=o(i(e)?e:{precision:e,thousand:n,decimal:u},c.settings.number),h=a(l.precision),f=0>t?"-":"",v=parseInt(d(Math.abs(t||0),h),10)+"",y=v.length>3?v.length%3:0;return f+(y?v.substr(0,y)+l.thousand:"")+v.substr(y).replace(/(\d{3})(?=\d)/g,"$1"+l.thousand)+(h?l.decimal+d(Math.abs(t),h).split(".")[1]:"")},v=c.formatMoney=function(t,e,n,l,h,f){if(r(t))return s(t,function(t){return v(t,e,n,l,h,f)});t=p(t);var d=o(i(e)?e:{symbol:e,precision:n,thousand:l,decimal:h,format:f},c.settings.currency),y=u(d.format),m=t>0?y.pos:0>t?y.neg:y.zero;return m.replace("%s",d.symbol).replace("%v",g(Math.abs(t),a(d.precision),d.thousand,d.decimal))};c.formatColumn=function(t,e,l,h,f,d){if(!t)return[];var v=o(i(e)?e:{symbol:e,precision:l,thousand:h,decimal:f,format:d},c.settings.currency),y=u(v.format),m=y.pos.indexOf("%s")<y.pos.indexOf("%v")?!0:!1,b=0,_=s(t,function(t){if(r(t))return c.formatColumn(t,v);t=p(t);var e=t>0?y.pos:0>t?y.neg:y.zero,n=e.replace("%s",v.symbol).replace("%v",g(Math.abs(t),a(v.precision),v.thousand,v.decimal));return n.length>b&&(b=n.length),n});return s(_,function(t){return n(t)&&t.length<b?m?t.replace(v.symbol,v.symbol+new Array(b-t.length+1).join(" ")):new Array(b-t.length+1).join(" ")+t:t})},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=c),exports.accounting=c):"function"==typeof define&&define.amd?define([],function(){return c}):(c.noConflict=function(n){return function(){return t.accounting=n,c.noConflict=e,c}}(t.accounting),t.accounting=c)}(this),function(){function t(t,e,n){for(var r=(n||0)-1,i=t?t.length:0;++r<i;)if(t[r]===e)return r;return-1}function e(t,e){for(var n=t.criteria,r=e.criteria,i=-1,o=n.length;++i<o;){var s=n[i],a=r[i];if(s!==a){if(s>a||"undefined"==typeof s)return 1;if(a>s||"undefined"==typeof a)return-1}}return t.index-e.index}function n(t){return"\\"+xn[t]}function r(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,i=n-e||0,o=Array(0>i?0:i);++r<i;)o[r]=t[e+r];return o}function i(t){return t instanceof i?t:new o(t)}function o(t,e){this.__chain__=!!e,this.__wrapped__=t}function s(t){function e(){if(i){var t=r(i);Cn.apply(t,arguments)}if(this instanceof e){var s=a(n.prototype),u=n.apply(s,t||arguments);return O(u)?u:s}return n.apply(o,t||arguments)}var n=t[0],i=t[2],o=t[4];return e}function a(t){return O(t)?Mn(t):{}}function u(t,e,n){if("function"!=typeof t)return ze;if("undefined"==typeof e||!("prototype"in t))return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return Ie(t,e)}function c(t){function e(){var t=h?u:this;if(o){var v=r(o);Cn.apply(v,arguments)}if((s||p)&&(v||(v=r(arguments)),s&&Cn.apply(v,s),p&&v.length<l))return i|=16,c([n,d?i:-4&i,v,null,u,l]);if(v||(v=arguments),f&&(n=t[g]),this instanceof e){t=a(n.prototype);var y=n.apply(t,v);return O(y)?y:t}return n.apply(t,v)}var n=t[0],i=t[1],o=t[2],s=t[3],u=t[4],l=t[5],h=1&i,f=2&i,p=4&i,d=8&i,g=n;return e}function l(t,e){for(var n=-1,r=m(),i=t?t.length:0,o=[];++n<i;){var s=t[n];r(e,s)<0&&o.push(s)}return o}function h(t,e,n,r){for(var i=(r||0)-1,o=t?t.length:0,s=[];++i<o;){var a=t[i];if(a&&"object"==typeof a&&"number"==typeof a.length&&(Kn(a)||w(a))){e||(a=h(a,e,n));var u=-1,c=a.length,l=s.length;for(s.length+=c;++u<c;)s[l++]=a[u]}else n||s.push(a)}return s}function f(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;var o=typeof t,s=typeof e;if(!(t!==t||t&&wn[o]||e&&wn[s]))return!1;if(null==t||null==e)return t===e;var a=In.call(t),u=In.call(e);if(a!=u)return!1;switch(a){case dn:case gn:return+t==+e;case yn:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case bn:case _n:return t==String(e)}var c=a==pn;if(!c){var l=t instanceof i,h=e instanceof i;if(l||h)return f(l?t.__wrapped__:t,h?e.__wrapped__:e,n,r);if(a!=mn)return!1;var p=t.constructor,d=e.constructor;if(p!=d&&!(N(p)&&p instanceof p&&N(d)&&d instanceof d)&&"constructor"in t&&"constructor"in e)return!1}n||(n=[]),r||(r=[]);for(var g=n.length;g--;)if(n[g]==t)return r[g]==e;var v=!0,y=0;if(n.push(t),r.push(e),c){if(y=e.length,v=y==t.length)for(;y--&&(v=f(t[y],e[y],n,r)););}else tr(e,function(e,i,o){return On.call(o,i)?(y++,!(v=On.call(t,i)&&f(t[i],e,n,r))&&an):void 0}),v&&tr(t,function(t,e,n){return On.call(n,e)?!(v=--y>-1)&&an:void 0});return n.pop(),r.pop(),v}function p(t,e){return t+Nn(Xn()*(e-t+1))}function d(t,e,n){for(var r=-1,i=m(),o=t?t.length:0,s=[],a=n?[]:s;++r<o;){var u=t[r],c=n?n(u,r,t):u;(e?!r||a[a.length-1]!==c:i(a,c)<0)&&(n&&a.push(c),s.push(u))}return s}function g(t){return function(e,n,r){var i={};n=We(n,r,3);var o=-1,s=e?e.length:0;if("number"==typeof s)for(;++o<s;){var a=e[o];t(i,a,n(a,o,e),e)}else er(e,function(e,r,o){t(i,e,n(e,r,o),o)});return i}}function v(t,e,n,r,i,o){var a=2&e,u=16&e,l=32&e;if(!a&&!N(t))throw new TypeError;u&&!n.length&&(e&=-17,u=n=!1),l&&!r.length&&(e&=-33,l=r=!1);var h=1==e||17===e?s:c;return h([t,e,n,r,i,o])}function y(t){return Qn[t]}function m(){var e=(e=i.indexOf)===ye?t:e;return e}function b(t){return"function"==typeof t&&Bn.test(t)}function _(t){return Gn[t]}function w(t){return t&&"object"==typeof t&&"number"==typeof t.length&&In.call(t)==fn||!1}function x(t){if(!t)return t;for(var e=1,n=arguments.length;n>e;e++){var r=arguments[e];if(r)for(var i in r)t[i]=r[i]}return t}function S(t){return O(t)?Kn(t)?r(t):x({},t):t}function E(t){if(!t)return t;for(var e=1,n=arguments.length;n>e;e++){var r=arguments[e];if(r)for(var i in r)"undefined"==typeof t[i]&&(t[i]=r[i])}return t}function k(t){var e=[];return tr(t,function(t,n){N(t)&&e.push(n)}),e.sort()}function $(t,e){return t?On.call(t,e):!1}function T(t){for(var e=-1,n=Ln(t),r=n.length,i={};++e<r;){var o=n[e];i[t[o]]=o}return i}function A(t){return t===!0||t===!1||t&&"object"==typeof t&&In.call(t)==dn||!1}function j(t){return t&&"object"==typeof t&&In.call(t)==gn||!1}function R(t){return t&&1===t.nodeType||!1}function I(t){if(!t)return!0;if(Kn(t)||D(t))return!t.length;for(var e in t)if(On.call(t,e))return!1;return!0}function B(t,e){return f(t,e)}function P(t){return Dn(t)&&!Vn(parseFloat(t))}function N(t){return"function"==typeof t}function O(t){return!(!t||!wn[typeof t])}function C(t){return M(t)&&t!=+t}function F(t){return null===t}function M(t){return"number"==typeof t||t&&"object"==typeof t&&In.call(t)==yn||!1}function H(t){return t&&wn[typeof t]&&In.call(t)==bn||!1}function D(t){return"string"==typeof t||t&&"object"==typeof t&&In.call(t)==_n||!1}function V(t){return"undefined"==typeof t}function W(t){var e=[];tr(t,function(t,n){e.push(n)}),e=l(e,h(arguments,!0,!1,1));for(var n=-1,r=e.length,i={};++n<r;){var o=e[n];i[o]=t[o]}return i}function U(t){for(var e=-1,n=Ln(t),r=n.length,i=Array(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}function z(t){for(var e=-1,n=h(arguments,!0,!1,1),r=n.length,i={};++e<r;){var o=n[e];o in t&&(i[o]=t[o])}return i}function X(t){for(var e=-1,n=Ln(t),r=n.length,i=Array(r);++e<r;)i[e]=t[n[e]];return i}function q(t,e){var n=m(),r=t?t.length:0,i=!1;return r&&"number"==typeof r?i=n(t,e)>-1:er(t,function(t){return(i=t===e)&&an}),i}function K(t,e,n){var r=!0;e=We(e,n,3);var i=-1,o=t?t.length:0;if("number"==typeof o)for(;++i<o&&(r=!!e(t[i],i,t)););else er(t,function(t,n,i){return!(r=!!e(t,n,i))&&an});return r}function J(t,e,n){var r=[];e=We(e,n,3);var i=-1,o=t?t.length:0;if("number"==typeof o)for(;++i<o;){var s=t[i];e(s,i,t)&&r.push(s)}else er(t,function(t,n,i){e(t,n,i)&&r.push(t)});return r}function L(t,e,n){e=We(e,n,3);var r=-1,i=t?t.length:0;if("number"!=typeof i){var o;return er(t,function(t,n,r){return e(t,n,r)?(o=t,an):void 0}),o}for(;++r<i;){var s=t[r];if(e(s,r,t))return s}}function Q(t,e){return fe(t,e,!0)}function G(t,e,n){var r=-1,i=t?t.length:0;if(e=e&&"undefined"==typeof n?e:u(e,n,3),"number"==typeof i)for(;++r<i&&e(t[r],r,t)!==an;);else er(t,e)}function Z(t,e){var n=t?t.length:0;if("number"==typeof n)for(;n--&&e(t[n],n,t)!==!1;);else{var r=Ln(t);n=r.length,er(t,function(t,i,o){return i=r?r[--n]:--n,e(o[i],i,o)===!1&&an})}}function Y(t,e){var n=r(arguments,2),i=-1,o="function"==typeof e,s=t?t.length:0,a=Array("number"==typeof s?s:0);return G(t,function(t){a[++i]=(o?e:t[e]).apply(t,n)}),a}function te(t,e,n){var r=-1,i=t?t.length:0;if(e=We(e,n,3),"number"==typeof i)for(var o=Array(i);++r<i;)o[r]=e(t[r],r,t);else o=[],er(t,function(t,n,i){o[++r]=e(t,n,i)});return o}function ee(t,e,n){var r=-1/0,i=r;"function"!=typeof e&&n&&n[e]===t&&(e=null);var o=-1,s=t?t.length:0;if(null==e&&"number"==typeof s)for(;++o<s;){var a=t[o];a>i&&(i=a)}else e=We(e,n,3),G(t,function(t,n,o){var s=e(t,n,o);s>r&&(r=s,i=t)});return i}function ne(t,e,n){var r=1/0,i=r;"function"!=typeof e&&n&&n[e]===t&&(e=null);var o=-1,s=t?t.length:0;if(null==e&&"number"==typeof s)for(;++o<s;){var a=t[o];i>a&&(i=a)}else e=We(e,n,3),G(t,function(t,n,o){var s=e(t,n,o);r>s&&(r=s,i=t)});return i}function re(t,e,n,r){if(!t)return n;var i=arguments.length<3;e=We(e,r,4);var o=-1,s=t.length;if("number"==typeof s)for(i&&(n=t[++o]);++o<s;)n=e(n,t[o],o,t);else er(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)});return n}function ie(t,e,n,r){var i=arguments.length<3;return e=We(e,r,4),Z(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)}),n}function oe(t,e,n){return e=We(e,n,3),J(t,function(t,n,r){return!e(t,n,r)})}function se(t,e,n){if(t&&"number"!=typeof t.length&&(t=X(t)),null==e||n)return t?t[p(0,t.length-1)]:on;var r=ae(t);return r.length=zn(Un(0,e),r.length),r}function ae(t){var e=-1,n=t?t.length:0,r=Array("number"==typeof n?n:0);return G(t,function(t){var n=p(0,++e);r[e]=r[n],r[n]=t}),r}function ue(t){var e=t?t.length:0;return"number"==typeof e?e:Ln(t).length}function ce(t,e,n){var r;e=We(e,n,3);var i=-1,o=t?t.length:0;if("number"==typeof o)for(;++i<o&&!(r=e(t[i],i,t)););else er(t,function(t,n,i){return(r=e(t,n,i))&&an});return!!r}function le(t,n,r){var i=-1,o=t?t.length:0,s=Array("number"==typeof o?o:0);for(n=We(n,r,3),G(t,function(t,e,r){s[++i]={criteria:[n(t,e,r)],index:i,value:t}}),o=s.length,s.sort(e);o--;)s[o]=s[o].value;return s}function he(t){return Kn(t)?r(t):t&&"number"==typeof t.length?te(t):X(t)}function fe(t,e,n){return n&&I(e)?on:(n?L:J)(t,e)}function pe(t){for(var e=-1,n=t?t.length:0,r=[];++e<n;){var i=t[e];i&&r.push(i)}return r}function de(t){return l(t,h(arguments,!0,!0,1))}function ge(t,e,n){var i=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var s=-1;for(e=We(e,n,3);++s<o&&e(t[s],s,t);)i++}else if(i=e,null==i||n)return t?t[0]:on;return r(t,0,zn(Un(0,i),o))}function ve(t,e){return h(t,e)}function ye(e,n,r){if("number"==typeof r){var i=e?e.length:0;r=0>r?Un(0,i+r):r||0}else if(r){var o=Ee(e,n);return e[o]===n?o:-1}return t(e,n,r)}function me(t,e,n){var i=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var s=o;for(e=We(e,n,3);s--&&e(t[s],s,t);)i++}else i=null==e||n?1:e||i;return r(t,0,zn(Un(0,o-i),o))}function be(){for(var t=[],e=-1,n=arguments.length;++e<n;){var r=arguments[e];(Kn(r)||w(r))&&t.push(r)}var i=t[0],o=-1,s=m(),a=i?i.length:0,u=[];t:for(;++o<a;)if(r=i[o],s(u,r)<0){for(var e=n;--e;)if(s(t[e],r)<0)continue t;u.push(r)}return u}function _e(t,e,n){var i=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var s=o;for(e=We(e,n,3);s--&&e(t[s],s,t);)i++}else if(i=e,null==i||n)return t?t[o-1]:on;return r(t,Un(0,o-i))}function we(t,e,n){var r=t?t.length:0;for("number"==typeof n&&(r=(0>n?Un(0,r+n):zn(n,r-1))+1);r--;)if(t[r]===e)return r;return-1}function xe(t,e,n){t=+t||0,n=+n||1,null==e&&(e=t,t=0);for(var r=-1,i=Un(0,Pn((e-t)/n)),o=Array(i);++r<i;)o[r]=t,t+=n;return o}function Se(t,e,n){if("number"!=typeof e&&null!=e){var i=0,o=-1,s=t?t.length:0;for(e=We(e,n,3);++o<s&&e(t[o],o,t);)i++}else i=null==e||n?1:Un(0,e);return r(t,i)}function Ee(t,e,n,r){var i=0,o=t?t.length:i;for(n=n?We(n,r,1):ze,e=n(e);o>i;){var s=i+o>>>1;n(t[s])<e?i=s+1:o=s}return i}function ke(){return d(h(arguments,!0,!0))}function $e(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n="function"!=typeof e&&r&&r[e]===t?null:e,e=!1),null!=n&&(n=We(n,r,3)),d(t,e,n)}function Te(t){return l(t,r(arguments,1))}function Ae(){for(var t=-1,e=ee(or(arguments,"length")),n=Array(0>e?0:e);++t<e;)n[t]=or(arguments,t);return n}function je(t,e){var n=-1,r=t?t.length:0,i={};for(e||!r||Kn(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function Re(t,e){if(!N(e))throw new TypeError;return function(){return--t<1?e.apply(this,arguments):void 0}}function Ie(t,e){return arguments.length>2?v(t,17,r(arguments,2),null,e):v(t,1,null,null,e)}function Be(t){for(var e=arguments.length>1?h(arguments,!0,!1,1):k(t),n=-1,r=e.length;++n<r;){var i=e[n];t[i]=v(t[i],1,null,null,t)}return t}function Pe(){for(var t=arguments,e=t.length;e--;)if(!N(t[e]))throw new TypeError;return function(){for(var e=arguments,n=t.length;n--;)e=[t[n].apply(this,e)];return e[0]}}function Ne(t,e,n){var r,i,o,s,a,u,c,l=0,h=!1,f=!0;if(!N(t))throw new TypeError;if(e=Un(0,e)||0,n===!0){var p=!0;f=!1}else O(n)&&(p=n.leading,h="maxWait"in n&&(Un(e,n.maxWait)||0),f="trailing"in n?n.trailing:f);var d=function(){var n=e-(sr()-s);if(0>=n){i&&clearTimeout(i);var h=c;i=u=c=on,h&&(l=sr(),o=t.apply(a,r),u||i||(r=a=null))}else u=setTimeout(d,n)},g=function(){u&&clearTimeout(u),i=u=c=on,(f||h!==e)&&(l=sr(),o=t.apply(a,r),u||i||(r=a=null))};return function(){if(r=arguments,s=sr(),a=this,c=f&&(u||!p),h===!1)var n=p&&!u;else{i||p||(l=s);var v=h-(s-l),y=0>=v;y?(i&&(i=clearTimeout(i)),l=s,o=t.apply(a,r)):i||(i=setTimeout(g,v))}return y&&u?u=clearTimeout(u):u||e===h||(u=setTimeout(d,e)),n&&(y=!0,o=t.apply(a,r)),!y||u||i||(r=a=null),o}}function Oe(t){if(!N(t))throw new TypeError;var e=r(arguments,1);return setTimeout(function(){t.apply(on,e)},1)}function Ce(t,e){if(!N(t))throw new TypeError;var n=r(arguments,2);return setTimeout(function(){t.apply(on,n)},e)}function Fe(t,e){var n={};return function(){var r=e?e.apply(this,arguments):un+arguments[0];return On.call(n,r)?n[r]:n[r]=t.apply(this,arguments)}}function Me(t){var e,n;if(!N(t))throw new TypeError;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}}function He(t){return v(t,16,r(arguments,1))}function De(t,e,n){var r=!0,i=!0;if(!N(t))throw new TypeError;return n===!1?r=!1:O(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),n={},n.leading=r,n.maxWait=e,n.trailing=i,Ne(t,e,n)}function Ve(t,e){return v(e,16,[t])}function We(t,e,n){var r=typeof t;if(null==t||"function"==r)return u(t,e,n);if("object"!=r)return Ke(t);var i=Ln(t);return function(e){for(var n=i.length,r=!1;n--&&(r=e[i[n]]===t[i[n]]););return r}}function Ue(t){return null==t?"":String(t).replace(Yn,y)}function ze(t){return t}function Xe(t){G(k(t),function(e){var n=i[e]=t[e];i.prototype[e]=function(){var t=[this.__wrapped__];Cn.apply(t,arguments);var e=n.apply(i,t);return this.__chain__?new o(e,!0):e}})}function qe(){return Sn._=Rn,this}function Ke(t){return function(e){return e[t]}}function Je(t,e){return null==t&&null==e&&(e=1),t=+t||0,null==e?(e=t,t=0):e=+e||0,t+Nn(Xn()*(e-t+1))}function Le(t,e){if(t){var n=t[e];return N(n)?t[e]():n}}function Qe(t,e,r){var o=i,s=o.templateSettings;t=String(t||""),r=E({},r,s);var a=0,u="__p += '",c=r.variable,l=RegExp((r.escape||ln).source+"|"+(r.interpolate||ln).source+"|"+(r.evaluate||ln).source+"|$","g");t.replace(l,function(e,r,i,o,s){return u+=t.slice(a,s).replace(hn,n),r&&(u+="' +\n_.escape("+r+") +\n'"),o&&(u+="';\n"+o+";\n__p += '"),i&&(u+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),a=s+e.length,e}),u+="';\n",c||(c="obj",u="with ("+c+" || {}) {\n"+u+"\n}\n"),u="function("+c+") {\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n"+u+"return __p\n}";try{var h=Function("_","return "+u)(o)}catch(f){throw f.source=u,f}return e?h(e):(h.source=u,h)}function Ge(t,e,n){t=(t=+t)>-1?t:0;var r=-1,i=Array(t);for(e=u(e,n,1);++r<t;)i[r]=e(r);return i}function Ze(t){return null==t?"":String(t).replace(Zn,_)}function Ye(t){var e=++sn+"";return t?t+e:e}function tn(t){return t=new o(t),t.__chain__=!0,t}function en(t,e){return e(t),t}function nn(){return this.__chain__=!0,this}function rn(){return this.__wrapped__}var on,sn=0,an={},un=+new Date+"",cn=/<%=([\s\S]+?)%>/g,ln=/($^)/,hn=/['\n\r\t\u2028\u2029\\]/g,fn="[object Arguments]",pn="[object Array]",dn="[object Boolean]",gn="[object Date]",vn="[object Function]",yn="[object Number]",mn="[object Object]",bn="[object RegExp]",_n="[object String]",wn={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},xn={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},Sn=wn[typeof window]&&window||this,En=wn[typeof exports]&&exports&&!exports.nodeType&&exports,kn=wn[typeof module]&&module&&!module.nodeType&&module,$n=kn&&kn.exports===En&&En,Tn=wn[typeof global]&&global;!Tn||Tn.global!==Tn&&Tn.window!==Tn||(Sn=Tn);var An=[],jn=Object.prototype,Rn=Sn._,In=jn.toString,Bn=RegExp("^"+String(In).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Pn=Math.ceil,Nn=Math.floor,On=jn.hasOwnProperty,Cn=An.push,Fn=jn.propertyIsEnumerable,Mn=b(Mn=Object.create)&&Mn,Hn=b(Hn=Array.isArray)&&Hn,Dn=Sn.isFinite,Vn=Sn.isNaN,Wn=b(Wn=Object.keys)&&Wn,Un=Math.max,zn=Math.min,Xn=Math.random;o.prototype=i.prototype;var qn={};!function(){var t={0:1,length:1};qn.spliceObjects=(An.splice.call(t,0,1),!t[0])}(1),i.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:cn,variable:""},Mn||(a=function(){function t(){}return function(e){if(O(e)){t.prototype=e;var n=new t;t.prototype=null}return n||Sn.Object()}}()),w(arguments)||(w=function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&On.call(t,"callee")&&!Fn.call(t,"callee")||!1});var Kn=Hn||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&In.call(t)==pn||!1},Jn=function(t){var e,n=t,r=[];if(!n)return r;if(!wn[typeof t])return r;for(e in n)On.call(n,e)&&r.push(e);return r},Ln=Wn?function(t){return O(t)?Wn(t):[]}:Jn,Qn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Gn=T(Qn),Zn=RegExp("("+Ln(Gn).join("|")+")","g"),Yn=RegExp("["+Ln(Qn).join("")+"]","g"),tr=function(t,e){var n,r=t,i=r;if(!r)return i;if(!wn[typeof r])return i;for(n in r)if(e(r[n],n,t)===an)return i;return i},er=function(t,e){var n,r=t,i=r;if(!r)return i;if(!wn[typeof r])return i;for(n in r)if(On.call(r,n)&&e(r[n],n,t)===an)return i;return i};N(/x/)&&(N=function(t){return"function"==typeof t&&In.call(t)==vn});var nr=g(function(t,e,n){On.call(t,n)?t[n]++:t[n]=1}),rr=g(function(t,e,n){(On.call(t,n)?t[n]:t[n]=[]).push(e)}),ir=g(function(t,e,n){t[n]=e}),or=te,sr=b(sr=Date.now)&&sr||function(){return(new Date).getTime()};i.after=Re,i.bind=Ie,i.bindAll=Be,i.chain=tn,i.compact=pe,i.compose=Pe,i.countBy=nr,i.debounce=Ne,i.defaults=E,i.defer=Oe,i.delay=Ce,i.difference=de,i.filter=J,i.flatten=ve,i.forEach=G,i.functions=k,i.groupBy=rr,i.indexBy=ir,i.initial=me,i.intersection=be,i.invert=T,i.invoke=Y,i.keys=Ln,i.map=te,i.max=ee,i.memoize=Fe,i.min=ne,i.omit=W,i.once=Me,i.pairs=U,i.partial=He,i.pick=z,i.pluck=or,i.range=xe,i.reject=oe,i.rest=Se,i.shuffle=ae,i.sortBy=le,i.tap=en,i.throttle=De,i.times=Ge,i.toArray=he,i.union=ke,i.uniq=$e,i.values=X,i.where=fe,i.without=Te,i.wrap=Ve,i.zip=Ae,i.collect=te,i.drop=Se,i.each=G,i.extend=x,i.methods=k,i.object=je,i.select=J,i.tail=Se,i.unique=$e,i.clone=S,i.contains=q,i.escape=Ue,i.every=K,i.find=L,i.has=$,i.identity=ze,i.indexOf=ye,i.isArguments=w,i.isArray=Kn,i.isBoolean=A,i.isDate=j,i.isElement=R,i.isEmpty=I,i.isEqual=B,i.isFinite=P,i.isFunction=N,i.isNaN=C,i.isNull=F,i.isNumber=M,i.isObject=O,i.isRegExp=H,i.isString=D,i.isUndefined=V,i.lastIndexOf=we,i.mixin=Xe,i.noConflict=qe,i.random=Je,i.reduce=re,i.reduceRight=ie,i.result=Le,i.size=ue,i.some=ce,i.sortedIndex=Ee,i.template=Qe,i.unescape=Ze,i.uniqueId=Ye,i.all=K,i.any=ce,i.detect=L,i.findWhere=Q,i.foldl=re,i.foldr=ie,i.include=q,i.inject=re,i.first=ge,i.last=_e,i.sample=se,i.take=ge,i.head=ge,Xe(i),i.VERSION="2.4.1",i.prototype.chain=nn,i.prototype.value=rn,G(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=An[t];i.prototype[t]=function(){var t=this.__wrapped__;return e.apply(t,arguments),qn.spliceObjects||0!==t.length||delete t[0],this}}),G(["concat","join","slice"],function(t){var e=An[t];i.prototype[t]=function(){var t=this.__wrapped__,n=e.apply(t,arguments);return this.__chain__&&(n=new o(n),n.__chain__=!0),n}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Sn._=i,define(function(){return i})):En&&kn?$n?(kn.exports=i)._=i:En._=i:Sn._=i}.call(this),function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(n,r,i){t.Backbone=e(t,i,n,r)});else if("undefined"!=typeof exports){var n=require("underscore");e(t,exports,n)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,n,r){{var i=t.Backbone,o=[],s=(o.push,o.slice);o.splice}e.VERSION="1.1.2",e.$=r,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=e.Events={on:function(t,e,n){if(!c(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,r){if(!c(this,"once",t,[e,r])||!e)return this;var i=this,o=n.once(function(){i.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,r)},off:function(t,e,r){var i,o,s,a,u,l,h,f;if(!this._events||!c(this,"off",t,[e,r]))return this;if(!t&&!e&&!r)return this._events=void 0,this;for(a=t?[t]:n.keys(this._events),u=0,l=a.length;l>u;u++)if(t=a[u],s=this._events[t]){if(this._events[t]=i=[],e||r)for(h=0,f=s.length;f>h;h++)o=s[h],(e&&e!==o.callback&&e!==o.callback._callback||r&&r!==o.context)&&i.push(o);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!c(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&l(n,e),r&&l(r,arguments),this},stopListening:function(t,e,r){var i=this._listeningTo;if(!i)return this;var o=!e&&!r;r||"object"!=typeof e||(r=this),t&&((i={})[t._listenId]=t);for(var s in i)t=i[s],t.off(e,r,this),(o||n.isEmpty(t._events))&&delete this._listeningTo[s];return this}},u=/\s+/,c=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(u.test(n)){for(var o=n.split(u),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(r));return!1}return!0},l=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e);return}},h={listenTo:"on",listenToOnce:"once"};n.each(h,function(t,e){a[e]=function(e,r,i){var o=this._listeningTo||(this._listeningTo={}),s=e._listenId||(e._listenId=n.uniqueId("l"));return o[s]=e,i||"object"!=typeof r||(i=this),e[t](r,i,this),this}}),a.bind=a.on,a.unbind=a.off,n.extend(e,a);var f=e.Model=function(t,e){var r=t||{};e||(e={}),this.cid=n.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(r=this.parse(r,e)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(f.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,r){var i,o,s,a,u,c,l,h;if(null==t)return this;if("object"==typeof t?(o=t,r=e):(o={})[t]=e,r||(r={}),!this._validate(o,r))return!1;s=r.unset,u=r.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={}),h=this.attributes,l=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(i in o)e=o[i],n.isEqual(h[i],e)||a.push(i),n.isEqual(l[i],e)?delete this.changed[i]:this.changed[i]=e,s?delete h[i]:h[i]=e;if(!u){a.length&&(this._pending=r);for(var f=0,p=a.length;p>f;f++)this.trigger("change:"+a[f],this,h[a[f]],r)}if(c)return this;if(!u)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?n.clone(this.changed):!1;var e,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var o in t)n.isEqual(i[o],e=t[o])||((r||(r={}))[o]=e);return r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,r=t.success;return t.success=function(n){return e.set(e.parse(n,t),t)?(r&&r(e,n,t),void e.trigger("sync",e,n,t)):!1},F(this,t),this.sync("read",this,t)},save:function(t,e,r){var i,o,s,a=this.attributes;if(null==t||"object"==typeof t?(i=t,r=e):(i={})[t]=e,r=n.extend({validate:!0},r),i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},a,i)),void 0===r.parse&&(r.parse=!0);var u=this,c=r.success;return r.success=function(t){u.attributes=a;var e=u.parse(t,r);return r.wait&&(e=n.extend(i||{},e)),n.isObject(e)&&!u.set(e,r)?!1:(c&&c(u,t,r),void u.trigger("sync",u,t,r))},F(this,r),o=this.isNew()?"create":r.patch?"patch":"update","patch"===o&&(r.attrs=i),s=this.sync(o,this,r),i&&r.wait&&(this.attributes=a),s},destroy:function(t){t=t?n.clone(t):{};var e=this,r=t.success,i=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(n){(t.wait||e.isNew())&&i(),r&&r(e,n,t),e.isNew()||e.trigger("sync",e,n,t)},this.isNew())return t.success(),!1;F(this,t);var o=this.sync("delete",this,t);return t.wait||i(),o},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||C();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var r=this.validationError=this.validate(t,e)||null;return r?(this.trigger("invalid",this,r,n.extend(e,{validationError:r})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];n.each(p,function(t){f.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.attributes),n[t].apply(n,e)}});var d=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},v={add:!0,remove:!1};n.extend(d.prototype,a,{model:f,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,v))},remove:function(t,e){var r=!n.isArray(t);t=r?[t]:n.clone(t),e||(e={});var i,o,s,a;for(i=0,o=t.length;o>i;i++)a=t[i]=this.get(t[i]),a&&(delete this._byId[a.id],delete this._byId[a.cid],s=this.indexOf(a),this.models.splice(s,1),this.length--,e.silent||(e.index=s,a.trigger("remove",a,this,e)),this._removeReference(a,e));return r?t[0]:t},set:function(t,e){e=n.defaults({},e,g),e.parse&&(t=this.parse(t,e));var r=!n.isArray(t);t=r?t?[t]:[]:n.clone(t);var i,o,s,a,u,c,l,h=e.at,p=this.model,d=this.comparator&&null==h&&e.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,y=[],m=[],b={},_=e.add,w=e.merge,x=e.remove,S=!d&&_&&x?[]:!1;for(i=0,o=t.length;o>i;i++){if(u=t[i]||{},s=u instanceof f?a=u:u[p.prototype.idAttribute||"id"],c=this.get(s))x&&(b[c.cid]=!0),w&&(u=u===a?a.attributes:u,e.parse&&(u=c.parse(u,e)),c.set(u,e),d&&!l&&c.hasChanged(v)&&(l=!0)),t[i]=c;else if(_){if(a=t[i]=this._prepareModel(u,e),!a)continue;y.push(a),this._addReference(a,e)}a=c||a,!S||!a.isNew()&&b[a.id]||S.push(a),b[a.id]=!0}if(x){for(i=0,o=this.length;o>i;++i)b[(a=this.models[i]).cid]||m.push(a);m.length&&this.remove(m,e)}if(y.length||S&&S.length)if(d&&(l=!0),this.length+=y.length,null!=h)for(i=0,o=y.length;o>i;i++)this.models.splice(h+i,0,y[i]);else{S&&(this.models.length=0);var E=S||y;for(i=0,o=E.length;o>i;i++)this.models.push(E[i])}if(l&&this.sort({silent:!0}),!e.silent){for(i=0,o=y.length;o>i;i++)(a=y[i]).trigger("add",a,this,e);(l||S&&S.length)&&this.trigger("sort",this,e)}return r?t[0]:t},reset:function(t,e){e||(e={});for(var r=0,i=this.models.length;i>r;r++)this._removeReference(this.models[r],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return s.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return n.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,r=this;return t.success=function(n){var i=t.reset?"reset":"set";r[i](n,t),e&&e(r,n,t),r.trigger("sync",r,n,t)},F(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?n.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var r=this,i=e.success;return e.success=function(t,n){e.wait&&r.add(t,e),i&&i(t,n,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof f)return t;e=e?n.clone(e):{},e.collection=this;var r=new this.model(t,e);return r.validationError?(this.trigger("invalid",this,r.validationError,e),!1):r},_addReference:function(t){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)
},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(y,function(t){d.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.models),n[t].apply(n,e)}});var m=["groupBy","countBy","sortBy","indexBy"];n.each(m,function(t){d.prototype[t]=function(e,r){var i=n.isFunction(e)?e:function(t){return t.get(e)};return n[t](this.models,i,r)}});var b=e.View=function(t){this.cid=n.uniqueId("view"),t||(t={}),n.extend(this,n.pick(t,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},_=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];n.extend(b.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=n.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var r=t[e];if(n.isFunction(r)||(r=this[t[e]]),r){var i=e.match(_),o=i[1],s=i[2];r=n.bind(r,this),o+=".delegateEvents"+this.cid,""===s?this.$el.on(o,r):this.$el.on(o,s,r)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t["class"]=n.result(this,"className"));var r=e.$("<"+n.result(this,"tagName")+">").attr(t);this.setElement(r,!1)}}}),e.sync=function(t,r,i){var o=S[t];n.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:o,dataType:"json"};if(i.url||(s.url=n.result(r,"url")||C()),null!=i.data||!r||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",i.emulateJSON&&(s.data._method=o);var a=i.beforeSend;i.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===s.type||i.emulateJSON||(s.processData=!1),"PATCH"===s.type&&x&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var u=i.xhr=e.ajax(n.extend(s,i));return r.trigger("request",r,u,i),u};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),S={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var E=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,$=/(\(\?)?:\w+/g,T=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(E.prototype,a,{initialize:function(){},route:function(t,r,i){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var o=this;return e.history.route(t,function(n){var s=o._extractParameters(t,n);o.execute(i,s),o.trigger.apply(o,["route:"+r].concat(s)),o.trigger("route",r,s),e.history.trigger("route",o,r,s)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(A,"\\$&").replace(k,"(?:$1)?").replace($,function(t,e){return e?t:"([^/?]+)"}).replace(T,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return n.map(r,function(t,e){return e===r.length-1?t||null:t?decodeURIComponent(t):null})}});var j=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},R=/^[#\/]|\s+$/g,I=/^\/+|\/+$/g,B=/msie [\w.]+/,P=/\/$/,N=/#.*$/;j.started=!1,n.extend(j.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(P,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(R,"")},start:function(t){if(j.started)throw new Error("Backbone.history has already been started");j.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,o=B.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);if(this.root=("/"+this.root+"/").replace(I,"/"),o&&this._wantsHashChange){var s=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=s.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(R,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),j.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),n.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!j.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(N,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),e.history=new j;var O=function(t,e){var r,i=this;r=t&&n.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,e);var o=function(){this.constructor=r};return o.prototype=i.prototype,r.prototype=new o,t&&n.extend(r.prototype,t),r.__super__=i.prototype,r};f.extend=d.extend=E.extend=b.extend=j.extend=O;var C=function(){throw new Error('A "url" property or function must be specified')},F=function(t,e){var n=e.error;e.error=function(r){n&&n(t,r,e),t.trigger("error",t,r,e)}};return e}),// Copyright (c)2012 Derick Bailey, Muted Solutions, LLC.
Backbone.Syphon=function(t,e,n){var r={};r.ignoredTypes=["button","submit","reset","fieldset"],r.serialize=function(t,r){var u={},c=s(r),l=i(t,c);return n.each(l,function(t){var n=e(t),r=o(n),i=c.keyExtractors.get(r),s=i(n),l=c.inputReaders.get(r),h=l(n),f=c.keyAssignmentValidators.get(r);if(f(n,s,h)){var p=c.keySplitter(s);u=a(u,p,h)}}),u},r.deserialize=function(t,r,a){var c=s(a),l=i(t,c),h=u(c,r);n.each(l,function(t){var n=e(t),r=o(n),i=c.keyExtractors.get(r),s=i(n),a=c.inputWriters.get(r),u=h[s];a(n,u)})};var i=function(t,r){var i=e("input, select, textarea",t.$el);return i=n.reject(i,function(t){var i,s=o(t),a=r.keyExtractors.get(s),u=a(e(t)),c=n.include(r.ignoredTypes,s),l=n.include(r.include,u),h=n.include(r.exclude,u);return i=l?!1:r.include?!0:h||c})},o=function(t){var n,r=e(t),i=r[0].tagName,o=i;return"input"===i.toLowerCase()&&(n=r.attr("type"),o=n?n:"text"),o.toLowerCase()},s=function(t){var e=n.clone(t)||{};return e.ignoredTypes=n.clone(r.ignoredTypes),e.inputReaders=e.inputReaders||r.InputReaders,e.inputWriters=e.inputWriters||r.InputWriters,e.keyExtractors=e.keyExtractors||r.KeyExtractors,e.keySplitter=e.keySplitter||r.KeySplitter,e.keyJoiner=e.keyJoiner||r.KeyJoiner,e.keyAssignmentValidators=e.keyAssignmentValidators||r.KeyAssignmentValidators,e},a=function(t,e,r){if(!e)return t;var i=e.shift();return t[i]||(t[i]=n.isArray(i)?[]:{}),0===e.length&&(n.isArray(t[i])?t[i].push(r):t[i]=r),e.length>0&&a(t[i],e,r),t},u=function(t,e,r){var i={};return n.each(e,function(e,o){var s={};r&&(o=t.keyJoiner(r,o)),n.isArray(e)?(o+="[]",s[o]=e):n.isObject(e)?s=u(t,e,o):s[o]=e,n.extend(i,s)}),i};return r}(Backbone,jQuery,_),Backbone.Syphon.TypeRegistry=function(){this.registeredTypes={}},Backbone.Syphon.TypeRegistry.extend=Backbone.Model.extend,_.extend(Backbone.Syphon.TypeRegistry.prototype,{get:function(t){var e=this.registeredTypes[t];return e||(e=this.registeredTypes["default"]),e},register:function(t,e){this.registeredTypes[t]=e},registerDefault:function(t){this.registeredTypes["default"]=t},unregister:function(t){this.registeredTypes[t]&&delete this.registeredTypes[t]}}),Backbone.Syphon.KeyExtractorSet=Backbone.Syphon.TypeRegistry.extend(),Backbone.Syphon.KeyExtractors=new Backbone.Syphon.KeyExtractorSet,Backbone.Syphon.KeyExtractors.registerDefault(function(t){return t.prop("name")}),Backbone.Syphon.InputReaderSet=Backbone.Syphon.TypeRegistry.extend(),Backbone.Syphon.InputReaders=new Backbone.Syphon.InputReaderSet,Backbone.Syphon.InputReaders.registerDefault(function(t){return t.val()}),Backbone.Syphon.InputReaders.register("checkbox",function(t){var e=t.prop("checked");return e}),Backbone.Syphon.InputWriterSet=Backbone.Syphon.TypeRegistry.extend(),Backbone.Syphon.InputWriters=new Backbone.Syphon.InputWriterSet,Backbone.Syphon.InputWriters.registerDefault(function(t,e){t.val(e)}),Backbone.Syphon.InputWriters.register("checkbox",function(t,e){t.prop("checked",e)}),Backbone.Syphon.InputWriters.register("radio",function(t,e){t.prop("checked",t.val()===e)}),Backbone.Syphon.KeyAssignmentValidatorSet=Backbone.Syphon.TypeRegistry.extend(),Backbone.Syphon.KeyAssignmentValidators=new Backbone.Syphon.KeyAssignmentValidatorSet,Backbone.Syphon.KeyAssignmentValidators.registerDefault(function(){return!0}),Backbone.Syphon.KeyAssignmentValidators.register("radio",function(t){return t.prop("checked")}),Backbone.Syphon.KeySplitter=function(t){var e=t.match(/[^\[\]]+/g);return t.indexOf("[]")===t.length-2&&(lastKey=e.pop(),e.push([lastKey])),e},Backbone.Syphon.KeyJoiner=function(t,e){return t+"["+e+"]"};